<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1c23">
    <title>Admin Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Side Panel -->
        <div class="side-panel">
            <div class="logo-container">
                <button id="toggle-sidebar" class="toggle-btn">
                    <i class="fas fa-bars"></i>
                </button>
                <h2>Admin Panel</h2>
            </div>
            <nav class="nav-menu">
                <ul>
                    <li class="nav-item active" data-section="overview">
                        <i class="fas fa-chart-line"></i>
                        <span>Overview</span>
                    </li>
                    <li class="nav-item" data-section="performance">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Performance</span>
                    </li>
                    <li class="nav-item" data-section="activity">
                        <i class="fas fa-history"></i>
                        <span>Activity</span>
                    </li>
                    <li class="nav-item" data-section="errors">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Errors</span>
                    </li>
                    <li class="nav-item" data-section="email-stats">
                        <i class="fas fa-envelope"></i>
                        <span>Email Stats</span>
                    </li>
                    <li class="nav-item" data-section="company-stats">
                        <i class="fas fa-building"></i>
                        <span>Company Stats</span>
                    </li>
                    <li class="nav-item" data-section="hr-visitors">
                        <i class="fas fa-users"></i>
                        <span>HR Visitors</span>
                    </li>
                    <li class="nav-item" data-section="portfolio-editor">
                        <i class="fas fa-edit"></i>
                        <span>Portfolio Editor</span>
                    </li>
                </ul>
            </nav>
            <div class="nav-footer">
                <button id="logout-btn" class="admin-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="section-container" id="overview" style="display: block;">
                <h1>Overview</h1>
                <!-- Overview Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-eye"></i>
                        <div class="stat-info">
                            <h3>Total Visits</h3>
                            <p id="total-visits">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-file-download"></i>
                        <div class="stat-info">
                            <h3>Resume Downloads</h3>
                            <p id="resume-downloads">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-clock"></i>
                        <div class="stat-info">
                            <h3>Avg. Read Time</h3>
                            <p id="avg-read-time">0 min</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-mobile-alt"></i>
                        <div class="stat-info">
                            <h3>Mobile Users</h3>
                            <p id="mobile-percentage">0%</p>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>Daily Visits</h3>
                        <canvas id="visitsChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Device Distribution</h3>
                        <canvas id="deviceChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Section Views</h3>
                        <canvas id="sectionChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Scroll Depth</h3>
                        <canvas id="scrollChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="section-container" id="performance">
                <h1>Performance</h1>
                <!-- Performance Metrics -->
                <div class="performance-section">
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <h4>Average Load Time</h4>
                            <p id="avg-load-time">0ms</p>
                        </div>
                        <div class="metric-card">
                            <h4>Average DOM Ready</h4>
                            <p id="avg-dom-ready">0ms</p>
                        </div>
                        <div class="metric-card">
                            <h4>Average First Paint</h4>
                            <p id="avg-first-paint">0ms</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-container" id="activity">
                <h1>Activity</h1>
                <!-- Recent Activity -->
                <div class="recent-activity">
                    <div class="activity-filters">
                        <button class="filter-btn active" data-type="all">All</button>
                        <button class="filter-btn" data-type="visit">Visits</button>
                        <button class="filter-btn" data-type="download">Downloads</button>
                        <button class="filter-btn" data-type="error">Errors</button>
                    </div>
                    <div class="activity-list" id="activity-list"></div>
                </div>
            </div>

            <div class="section-container" id="errors">
                <h1>Errors</h1>
                <!-- Error Log -->
                <div class="error-log">
                    <div class="error-list" id="error-list"></div>
                </div>
            </div>

            <div class="section-container" id="email-stats">
                <h1>Email Statistics</h1>
                <!-- Email Stats Section -->
                <div class="card">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <h3>Total Email Clicks</h3>
                            <p id="total-email-clicks">0</p>
                        </div>
                    </div>
                    <div class="recent-activity">
                        <h3>Recent Email Interactions</h3>
                        <div id="recent-emails" class="activity-list"></div>
                    </div>
                </div>
            </div>

            <div class="section-container" id="company-stats">
                <h1>Company Statistics</h1>
                <!-- Company Stats Section -->
                <div class="card">
                    <div class="stats-table">
                        <table id="company-stats-table">
                            <tr>
                                <th>Company</th>
                                <th>Views</th>
                            </tr>
                        </table>
                    </div>
                    <div class="recent-activity">
                        <h3>Recent Company Interactions</h3>
                        <div id="recent-company-interactions" class="activity-list"></div>
                    </div>
                </div>
            </div>

            <div class="section-container" id="hr-visitors">
                <h1>HR Visitors</h1>
                <!-- HR Visitors Section -->
                <div class="card">
                    <div class="section-header">
                        <button class="admin-btn" id="download-hr-csv">
                            <i class="fas fa-download"></i> Download CSV
                        </button>
                    </div>
                    <div class="clearfix"></div>
                    <div style="height: 10px; width: 100%;"></div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <i class="fas fa-eye"></i>
                            <div class="stat-info">
                                <h3>Total Visits</h3>
                            <p id="total-hr-visitors">0</p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-calendar-day"></i>
                            <div class="stat-info">
                                <h3>Today's HR Visitors</h3>
                                <p id="today-hr-visitors">0</p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-user-tie"></i>
                            <div class="stat-info">
                            <h3>Most Common Role</h3>
                            <p id="most-common-role">-</p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-building"></i>
                            <div class="stat-info">
                            <h3>Most Active Company</h3>
                            <p id="most-active-company">-</p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-share-alt"></i>
                            <div class="stat-info">
                            <h3>Most Common Source</h3>
                            <p id="most-common-source">-</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Daily HR Visitors Chart -->
                    <div class="chart-container hr-chart-container">
                        <h3>Daily HR Visitors</h3>
                        <canvas id="hrVisitorsChart"></canvas>
                    </div>
                    
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Company</th>
                                    <th>Email</th>
                                    <th>Contact</th>
                                    <th>Role</th>
                                    <th>Company Size</th>
                                    <th>Hiring For</th>
                                    <th>Source</th>
                                    <th>Contact Preference</th>
                                    <th>Device</th>
                                    <th>Time</th>
                                </tr>
                            </thead>
                            <tbody id="hr-visitors-table">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Pagination Controls -->
                    <div class="pagination-container">
                        <div class="pagination-info">
                            Showing <span id="page-start">1</span> to <span id="page-end">10</span> of <span id="total-entries">0</span> entries
                        </div>
                        <div class="pagination-controls">
                            <button id="prev-page" class="pagination-btn" disabled>
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <div id="pagination-numbers" class="pagination-numbers">
                                <!-- Page numbers will be populated by JavaScript -->
                            </div>
                            <button id="next-page" class="pagination-btn">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Portfolio Editor Section -->
    <div class="section-container" id="portfolio-editor">
        <h1>Portfolio Editor</h1>
        <div class="card">
            <!-- Content will be dynamically populated by enhanced-editor.js -->
            <div class="loading-indicator">
                <i class="fas fa-spinner fa-spin"></i> Loading editor...
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    
    <!-- Chart.js - Use specific version -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <!-- Custom styles for Portfolio Editor -->
    <style>
        /* Portfolio Editor Styles */
        #portfolio-editor .card {
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .editor-tabs {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .editor-tab {
            padding: 12px 20px;
            cursor: pointer;
            border: none;
            background: none;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
            margin-right: 5px;
        }
        
        .editor-tab.active {
            color: #2196F3;
            border-bottom: 3px solid #2196F3;
        }
        
        .editor-tab-content {
            display: none;
            padding: 20px;
            background: #fff;
            border-radius: 0 0 8px 8px;
        }
        
        .editor-tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input, 
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        
        .icon-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #666;
            padding: 5px;
            transition: color 0.3s;
        }
        
        .icon-btn:hover {
            color: #2196F3;
        }
        
        .admin-btn {
            padding: 10px 16px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
        }
        
        .admin-btn:hover {
            background: #1976D2;
        }
        
        .secondary-btn {
            padding: 10px 16px;
            background: #e0e0e0;
            color: #333;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
        }
        
        .secondary-btn:hover {
            background: #d0d0d0;
        }
        
        .loading-indicator {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #666;
        }
        
        .message {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 4px;
            color: white;
            z-index: 1000;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s;
        }
        
        .message.success {
            background-color: #4CAF50;
        }
        
        .message.error {
            background-color: #F44336;
        }
        
        .message.info {
            background-color: #2196F3;
        }
        
        .message.fade-out {
            animation: fadeOut 0.3s forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(10px); }
        }
        
        .preview-container {
            margin-top: 30px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .preview-container.hidden {
            display: none;
        }
        
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: #f5f5f5;
            border-bottom: 1px solid #ddd;
        }
        
        .preview-actions {
            display: flex;
            gap: 10px;
        }
        
        .preview-iframe {
            width: 100%;
            height: 600px;
            border: none;
        }
        
        /* Dynamic content editor styles */
        .editable-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .editable-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 4px;
            border: 1px solid #eee;
        }
        
        .editable-item input {
            flex: 1;
        }
        
        .item-actions {
            display: flex;
            gap: 5px;
        }
        
        .add-item-btn {
            margin-top: 10px;
        }
        
        .drag-handle {
            cursor: move;
            color: #ccc;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .editor-description {
            margin-bottom: 20px;
            padding: 15px;
            background: #f0f7ff;
            border-radius: 4px;
            border-left: 4px solid #2196F3;
        }
        
        .action-row {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .portfolio-actions {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .deploy-btn {
            padding: 12px 24px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
        }
        
        .deploy-btn:hover {
            background: #388E3C;
        }
    </style>
    
    <!-- Admin script -->
    <script src="admin.js"></script>
    
    <!-- Enhanced Portfolio Editor script -->
    <script src="enhanced-editor.js"></script>
</body>
</html> 